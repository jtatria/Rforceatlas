#!/usr/bin/r

suppressMessages( require( Rforceatlas ) )
suppressMessages( require( igraph ) )
suppressMessages( require( igraphdata ) )

data( "UKfaculty" )

# g <- sample_pa( 200 ) %>% as.undirected()
# g <- sample_smallworld(1, 1000, 5, 0.05)
# set.seed( 37 )
# init <- matrix( runif( igraph::vcount( g )*2, -1, 1 ) * 1000, igraph::vcount( g ) )

g <- UKfaculty %>% as.undirected()
igraph::write.graph( g, file='test.graphml', format='graphml' )
x <- c(
    99.281694,-842.325694,297.593958,-6.293275,437.574622,678.930149,-231.049616,-295.793897,
    -592.527208,-705.468785,-260.649509,451.310670,-152.382720,-995.558861,827.112039,600.433636,
    607.977004,-718.252284,171.008726,629.956188,-294.348093,691.704417,30.865272,709.426398,
    845.789335,-160.037847,674.052804,766.457526,243.792232,-870.031653,-904.590592,-682.439887,
    -993.166472,-103.226427,-917.599450,-856.916701,313.107088,-930.026298,-535.875825,486.859017,
    -219.264718,819.951962,800.938754,179.452559,590.077091,-534.576248,-982.894657,-694.145214,
    540.094372,579.022645,-353.799853,463.110892,66.041099,-229.737611,19.166256,-949.005181,
    -964.618856,-270.626445,356.684863,999.228043,278.958947,460.062623,-397.914186,104.889305,
    487.786860,75.389281,-174.906523,693.137126,243.368964,-858.765988,103.208161,53.605108,
    -357.013423,-573.644753,39.899541,-258.801116,-170.449698,738.648695,631.302758,
    -374.428714,230.761630
)
y <- c(
    314.6562,-660.897,-736.8363,-774.8758,-514.0814,897.1401,-670.6731,-948.9186,-727.698,338.0334,
    894.8985,-152.3786,-652.5215,727.3101,922.7771,-672.6517,312.6702,-587.8892,831.3608,455.6633,
    -562.8066,153.7764,-817.2889,822.3471,846.8632,860.4485,-986.5266,103.4839,-914.0357,752.3518,
    -920.635,-904.1816,-259.2768,-680.6386,155.2493,872.5534,-994.1854,-478.6526,-34.82558,138.5646,
    -485.4471,-278.0537,-129.9892,-908.337,818.4596,939.7619,-900.4388,-851.2241,-843.9917,737.7957,
    891.5341,-41.33477,77.07839,695.9543,69.076,307.855,-278.1204,-433.7027,46.03806,-637.8927,
    -17.51353,-718.4869,332.0285,742.8674,-321.0972,-956.7004,860.766,-95.56943,999.6824,568.862,
    -469.9326,126.8709,-601.5586,-524.2582,93.14665,720.1818,39.45846,908.0787,-392.1529,-641.2346,
    -450.4756
)
init <- cbind( x, y )
m <- igraph::as_adjacency_matrix( g, type='both' )
rbenchmark::benchmark( forceatlas( m, init=init, iter=5000, nohubs=TRUE ), nuatlas( m, init=init, iter=1000, nohubs=TRUE ), replications=10 )


